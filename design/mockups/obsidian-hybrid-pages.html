<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OpenSpace Obsidian Hybrid - Page Set</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg-0: #0d0d0d;
      --bg-1: #141414;
      --bg-2: #1a1a1a;
      --line: #232323;
      --line-strong: #333333;
      --text-0: #e8e8e8;
      --text-1: #9a9a9a;
      --text-2: #656565;
      --accent: #5e5ce6;
      --accent-soft: rgba(94, 92, 230, 0.14);

      --glass-bg: rgba(28, 28, 28, 0.82);
      --glass-line: rgba(255, 255, 255, 0.09);
      --glass-blur: blur(24px) saturate(150%);

      --ok: #3fb950;
      --warn: #d29922;
      --danger: #f85149;

      --kw: #ff7b72;
      --fn: #d2a8ff;
      --str: #a5d6ff;
      --cm: #8b949e;
      --ty: #ffa657;

      --f-xs: 11px;
      --f-sm: 12px;
      --f-md: 13px;
      --f-lg: 14px;

      --sp-1: 4px;
      --sp-2: 6px;
      --sp-3: 8px;
      --sp-4: 12px;
      --sp-5: 16px;
    }

    body {
      font-family: Inter, -apple-system, BlinkMacSystemFont, sans-serif;
      color: var(--text-0);
      background: var(--bg-0);
      height: 100vh;
      overflow: hidden;
    }

    .app {
      height: 100vh;
      display: grid;
      grid-template-rows: 36px 1fr;
    }

    .titlebar {
      display: flex;
      align-items: center;
      gap: var(--sp-4);
      background: var(--bg-1);
      border-bottom: 1px solid var(--line);
      padding: 0 12px;
      font-size: var(--f-sm);
    }

    .brand {
      font-weight: 600;
      letter-spacing: 0.01em;
    }

    .divider {
      width: 1px;
      height: 16px;
      background: var(--line-strong);
    }

    .mode-picker {
      display: flex;
      gap: 2px;
    }

    .mode-btn {
      border: 0;
      background: transparent;
      color: var(--text-1);
      font-size: var(--f-sm);
      padding: 4px 9px;
      cursor: pointer;
      border-radius: 4px;
      transition: 120ms ease;
    }

    .mode-btn:hover { color: var(--text-0); background: var(--bg-2); }
    .mode-btn.active {
      color: var(--text-0);
      background: var(--bg-2);
      box-shadow: inset 0 -2px 0 var(--accent);
    }

    .title-actions { margin-left: auto; display: flex; gap: 6px; }
    .title-actions .chip {
      border: 1px solid var(--line);
      background: transparent;
      color: var(--text-1);
      padding: 3px 8px;
      font-size: var(--f-xs);
    }

    .workspace {
      display: grid;
      grid-template-columns: 220px 1fr 250px;
      min-height: 0;
    }

    .sidebar {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      border-right: 1px solid var(--line);
      display: grid;
      grid-template-rows: 30px 1fr;
      min-height: 0;
    }

    .sidebar-header, .panel-header {
      border-bottom: 1px solid var(--line);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 12px;
      font-size: var(--f-xs);
      color: var(--text-2);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      font-weight: 600;
    }

    .sidebar-body, .panel-body { overflow: auto; min-height: 0; padding: 6px 0; }

    .section-title {
      font-size: var(--f-xs);
      color: var(--text-2);
      padding: 5px 12px;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      font-weight: 600;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 0 6px;
      padding: 5px 8px;
      color: var(--text-1);
      font-size: var(--f-sm);
      border-radius: 4px;
      cursor: pointer;
      transition: 120ms ease;
    }

    .nav-item:hover { background: rgba(255,255,255,0.04); color: var(--text-0); }
    .nav-item.active {
      color: var(--text-0);
      background: var(--accent-soft);
      box-shadow: inset 2px 0 0 var(--accent);
    }

    .file { font-family: 'JetBrains Mono', monospace; font-size: var(--f-xs); }

    .badge {
      margin-left: auto;
      font-size: 10px;
      padding: 0 4px;
      border-radius: 3px;
      background: rgba(255,255,255,0.09);
      color: var(--text-2);
    }

    .main {
      display: grid;
      grid-template-rows: 28px 32px 1fr;
      min-width: 0;
      min-height: 0;
      background: var(--bg-0);
      border-right: 1px solid var(--line);
    }

    .crumbs {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 0 12px;
      border-bottom: 1px solid var(--line);
      color: var(--text-2);
      font-size: var(--f-sm);
    }

    .crumbs .current { color: var(--text-0); }

    .tabs {
      display: flex;
      align-items: flex-end;
      gap: 2px;
      border-bottom: 1px solid var(--line);
      background: var(--bg-1);
      padding: 0 8px;
    }

    .tab {
      height: 26px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 0 10px;
      font-size: var(--f-sm);
      color: var(--text-1);
      cursor: pointer;
      max-width: 170px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .tab.active {
      color: var(--text-0);
      background: var(--bg-2);
      box-shadow: inset 0 -2px 0 var(--accent);
    }

    .view {
      display: none;
      min-height: 0;
      overflow: auto;
    }

    .view.active { display: block; }

    .panel-right {
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      display: grid;
      grid-template-rows: 30px 1fr;
      min-height: 0;
    }

    .diff-card {
      margin: 0 8px 6px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.03);
      font-size: var(--f-sm);
      padding: 6px 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stats { margin-left: auto; font-size: var(--f-xs); color: var(--text-2); }
    .stats .add { color: var(--ok); }
    .stats .del { color: var(--danger); }

    /* -------- Drawing View -------- */
    .drawing-wrap {
      height: 100%;
      display: grid;
      grid-template-columns: 42px 1fr;
      background: #f7f7f7;
    }

    .draw-tools {
      border-right: 1px solid #e2e2e2;
      background: #fcfcfc;
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 6px 4px;
    }

    .tool {
      height: 32px;
      border: 1px solid transparent;
      display: grid;
      place-items: center;
      color: #555;
      font-size: 12px;
      cursor: pointer;
    }

    .tool:hover { background: #f0f0f0; }
    .tool.active { background: #e9e9e9; border-color: #d0d0d0; color: #111; }

    .canvas {
      position: relative;
      background: #fff;
      background-image: radial-gradient(circle, #e8e8e8 1px, transparent 1px);
      background-size: 18px 18px;
      overflow: auto;
    }

    .diagram {
      width: 840px;
      margin: 36px auto;
      display: grid;
      gap: 36px;
      color: #1f1f1f;
      font-size: 12px;
    }

    .row { display: flex; justify-content: center; align-items: center; gap: 34px; }

    .node {
      min-width: 130px;
      border: 2px solid #343434;
      background: #fff;
      box-shadow: 0 1px 5px rgba(0,0,0,0.08);
      padding: 12px;
      text-align: center;
    }

    .node.api { border-color: #ff9f43; background: #fff8f0; }
    .node.auth { border-color: #5e5ce6; background: #f6f5ff; }
    .node.db { border-color: #2e86de; background: #f2f8ff; }

    .node .title { font-weight: 600; font-family: 'JetBrains Mono', monospace; }
    .node .sub { font-size: 11px; color: #5b5b5b; margin-top: 4px; }

    .arrow { color: #8a8a8a; font-size: 20px; }

    /* -------- Text (Code) View -------- */
    .code-editor {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.6;
      padding: 10px 0;
    }

    .line {
      display: flex;
      padding: 0 12px;
      gap: 14px;
    }

    .line:hover { background: rgba(255,255,255,0.025); }
    .line-num { width: 34px; text-align: right; color: var(--text-2); font-size: var(--f-xs); user-select: none; }
    .line-code { color: var(--text-0); white-space: pre; }

    .kw { color: var(--kw); }
    .fn { color: var(--fn); }
    .str { color: var(--str); }
    .cm { color: var(--cm); font-style: italic; }
    .ty { color: var(--ty); }

    .line.agent { background: rgba(94,92,230,0.12); }

    /* -------- Pretty Markdown View -------- */
    .md-view {
      padding: 20px 28px;
      max-width: 980px;
      color: #d9d9d9;
    }

    .md-view h1 { font-size: 24px; margin-bottom: 8px; }
    .md-view p { color: #b8b8b8; margin: 10px 0; line-height: 1.7; }
    .md-view h2 { font-size: 18px; margin: 22px 0 8px; }

    .md-callout {
      border-left: 3px solid var(--accent);
      background: rgba(94,92,230,0.10);
      padding: 10px 12px;
      margin: 12px 0;
      color: #d7d7ff;
      font-size: var(--f-sm);
    }

    .md-code {
      background: #111;
      border: 1px solid #2b2b2b;
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      padding: 12px;
      margin: 10px 0;
      overflow: auto;
    }

    .md-list { margin: 10px 0 10px 18px; color: #c8c8c8; }
    .md-list li { margin: 6px 0; }

    /* -------- Large Agent Discussion -------- */
    .chat-focus {
      height: 100%;
      display: grid;
      grid-template-rows: 1fr 56px;
      background: #0c0c0c;
    }

    .chat-log {
      padding: 12px 18px;
      overflow: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .msg {
      max-width: 78%;
      font-size: 14px;
      line-height: 1.55;
      padding: 11px 13px;
      border-radius: 10px;
      border: 1px solid #2e2e2e;
    }

    .msg.agent {
      align-self: flex-start;
      background: #1b1b1b;
      color: #dedede;
    }

    /* Relaxed color (very light tint, not bold purple/blue) */
    .msg.user {
      align-self: flex-end;
      background: rgba(255,255,255,0.09);
      color: #f2f2f2;
      border-color: rgba(255,255,255,0.14);
    }

    .chat-compose {
      border-top: 1px solid var(--line);
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 0 10px;
      background: #121212;
    }

    .mic-btn {
      width: 34px;
      height: 34px;
      border: 1px solid #343434;
      background: #181818;
      color: #888;
      border-radius: 17px;
      cursor: pointer;
    }

    .compose-input {
      flex: 1;
      height: 36px;
      border: 1px solid #343434;
      background: #0f0f0f;
      color: var(--text-0);
      padding: 0 12px;
      font-size: var(--f-lg);
      border-radius: 18px;
    }

    /* -------- Presentation View -------- */
    .present {
      height: 100%;
      display: grid;
      grid-template-columns: 180px 1fr;
      background: #0b0b0b;
    }

    .slides {
      border-right: 1px solid var(--line);
      padding: 8px;
      overflow: auto;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .thumb {
      height: 88px;
      border: 1px solid #2f2f2f;
      background: #111;
      color: #8f8f8f;
      font-size: 11px;
      display: grid;
      place-items: center;
      cursor: pointer;
    }

    .thumb.active { border-color: var(--accent); color: var(--text-0); }

    .stage-wrap {
      display: grid;
      place-items: center;
      padding: 22px;
    }

    .slide-stage {
      width: min(980px, 95%);
      aspect-ratio: 16 / 9;
      border: 1px solid #2d2d2d;
      background: linear-gradient(160deg, #121212 0%, #1a1a1a 100%);
      display: grid;
      grid-template-rows: auto 1fr auto;
      padding: 28px;
      gap: 14px;
    }

    .slide-title { font-size: 28px; font-weight: 600; letter-spacing: -0.01em; }
    .slide-body { color: #c4c4c4; font-size: 18px; line-height: 1.6; }
    .slide-foot { color: #747474; font-size: 12px; }

    /* -------- Dashboard View -------- */
    .dashboard {
      padding: 12px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      background: #0c0c0c;
    }

    .card {
      border: 1px solid #2a2a2a;
      background: #151515;
      padding: 10px;
      min-height: 112px;
    }

    .card h4 { font-size: 12px; text-transform: uppercase; letter-spacing: 0.04em; color: #8f8f8f; margin-bottom: 8px; }
    .metric { font-size: 24px; font-weight: 600; }
    .sub { font-size: 11px; color: #8d8d8d; margin-top: 4px; }

    .bar {
      margin-top: 10px;
      height: 6px;
      background: #242424;
      overflow: hidden;
    }

    .bar > span {
      display: block;
      height: 100%;
      background: var(--accent);
    }

    .feed { font-size: 12px; line-height: 1.6; color: #c2c2c2; }
    .feed .time { color: #7b7b7b; margin-left: 6px; font-size: 11px; }

    /* -------- Floating Glass Agent (global) -------- */
    .agent-float {
      position: fixed;
      right: 18px;
      bottom: 18px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 1px solid var(--glass-line);
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      display: grid;
      place-items: center;
      box-shadow: 0 8px 26px rgba(0,0,0,0.45), 0 0 18px rgba(94,92,230,0.22);
      cursor: pointer;
      z-index: 40;
    }

    .agent-float svg { width: 22px; height: 22px; color: var(--accent); }

    @media (max-width: 1200px) {
      .workspace { grid-template-columns: 200px 1fr; }
      .panel-right { display: none; }
      .dashboard { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="titlebar">
      <div class="brand">OpenSpace</div>
      <div class="divider"></div>
      <div class="mode-picker" id="modePicker">
        <button class="mode-btn active" data-view="drawing">Drawing</button>
        <button class="mode-btn" data-view="text">Text</button>
        <button class="mode-btn" data-view="markdown">Pretty MD</button>
        <button class="mode-btn" data-view="discussion">Agent Discussion</button>
        <button class="mode-btn" data-view="presentation">Presentation</button>
        <button class="mode-btn" data-view="dashboard">Progress Dashboard</button>
      </div>
      <div class="title-actions">
        <button class="chip">Open</button>
        <button class="chip">Commit</button>
      </div>
    </div>

    <div class="workspace">
      <aside class="sidebar">
        <div class="sidebar-header">
          <span>Explorer</span>
          <span>+</span>
        </div>
        <div class="sidebar-body">
          <div class="section-title">Project</div>
          <div class="nav-item active"><span>‚ñ∏</span><span>openspace</span></div>
          <div class="nav-item file"><span>¬∑</span><span>architecture-v2.graph.mmd</span><span class="badge">M</span></div>
          <div class="nav-item file"><span>¬∑</span><span>auth.service.ts</span></div>
          <div class="nav-item file"><span>¬∑</span><span>REQ-CORE-PRD.md</span></div>
          <div class="section-title">Sessions</div>
          <div class="nav-item"><span>üí¨</span><span>Design discussion</span></div>
          <div class="nav-item"><span>üí¨</span><span>Architecture review</span></div>
          <div class="section-title">Artifacts</div>
          <div class="nav-item"><span>‚ñ¶</span><span>Slides</span></div>
          <div class="nav-item"><span>‚óß</span><span>Dashboard</span></div>
        </div>
      </aside>

      <main class="main">
        <div class="crumbs"><span>src</span><span>‚Ä∫</span><span>services</span><span>‚Ä∫</span><span class="current">auth.service.ts</span></div>
        <div class="tabs">
          <div class="tab active">auth.service.ts</div>
          <div class="tab">architecture-v2.graph.mmd</div>
          <div class="tab">REQ-CORE-PRD.md</div>
        </div>

        <!-- Drawing -->
        <section class="view active" id="view-drawing">
          <div class="drawing-wrap">
            <div class="draw-tools">
              <div class="tool active">‚Üñ</div>
              <div class="tool">‚ñ≠</div>
              <div class="tool">‚óØ</div>
              <div class="tool">‚Üí</div>
              <div class="tool">T</div>
            </div>
            <div class="canvas">
              <div class="diagram">
                <div class="row">
                  <div class="node auth"><div class="title">Auth Service</div><div class="sub">JWT/OAuth</div></div>
                  <div class="arrow">‚Üí</div>
                  <div class="node api"><div class="title">API Gateway</div><div class="sub">Rate Limit</div></div>
                  <div class="arrow">‚Üí</div>
                  <div class="node db"><div class="title">PostgreSQL</div><div class="sub">Primary DB</div></div>
                </div>
                <div class="row">
                  <div class="node"><div class="title">Web Client</div><div class="sub">React</div></div>
                  <div class="arrow">‚Üí</div>
                  <div class="node"><div class="title">Edge Cache</div><div class="sub">CDN</div></div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Text -->
        <section class="view" id="view-text">
          <div class="code-editor">
            <div class="line"><span class="line-num">1</span><span class="line-code"><span class="cm">// Authentication service with JWT support</span></span></div>
            <div class="line"><span class="line-num">2</span><span class="line-code"></span></div>
            <div class="line"><span class="line-num">3</span><span class="line-code"><span class="kw">import</span> { <span class="ty">Injectable</span>, <span class="ty">Inject</span> } <span class="kw">from</span> <span class="str">'@nestjs/common'</span>;</span></div>
            <div class="line"><span class="line-num">4</span><span class="line-code"><span class="kw">import</span> { <span class="ty">JwtService</span> } <span class="kw">from</span> <span class="str">'@nestjs/jwt'</span>;</span></div>
            <div class="line"><span class="line-num">5</span><span class="line-code"></span></div>
            <div class="line"><span class="line-num">6</span><span class="line-code"><span class="kw">interface</span> <span class="ty">UserPayload</span> {</span></div>
            <div class="line"><span class="line-num">7</span><span class="line-code">  <span class="fn">sub</span>: <span class="ty">string</span>;</span></div>
            <div class="line"><span class="line-num">8</span><span class="line-code">  <span class="fn">email</span>: <span class="ty">string</span>;</span></div>
            <div class="line"><span class="line-num">9</span><span class="line-code">  <span class="fn">roles</span>: <span class="ty">string</span>[];</span></div>
            <div class="line"><span class="line-num">10</span><span class="line-code">}</span></div>
            <div class="line agent"><span class="line-num">11</span><span class="line-code"><span class="cm">// Builder editing in progress...</span></span></div>
            <div class="line"><span class="line-num">12</span><span class="line-code"><span class="kw">export class</span> <span class="ty">AuthService</span> {</span></div>
            <div class="line"><span class="line-num">13</span><span class="line-code">  <span class="kw">async</span> <span class="fn">validateUser</span>(<span class="fn">email</span>: <span class="ty">string</span>) {</span></div>
            <div class="line"><span class="line-num">14</span><span class="line-code">    <span class="kw">const</span> <span class="fn">user</span> = <span class="kw">await</span> <span class="kw">this</span>.<span class="fn">userRepo</span>.<span class="fn">findByEmail</span>(<span class="fn">email</span>);</span></div>
            <div class="line"><span class="line-num">15</span><span class="line-code">    <span class="kw">return</span> <span class="fn">user</span>;</span></div>
            <div class="line"><span class="line-num">16</span><span class="line-code">  }</span></div>
          </div>
        </section>

        <!-- Markdown -->
        <section class="view" id="view-markdown">
          <article class="md-view">
            <h1>OpenSpace Architecture Brief</h1>
            <p>This document summarizes the target runtime architecture for a high-density multi-modality environment where the agent remains always accessible while the workspace adapts per task.</p>
            <div class="md-callout">Decision: keep a single visual language (Obsidian Hybrid), and vary only the content surface per mode.</div>
            <h2>Principles</h2>
            <ul class="md-list">
              <li>Context-first layout with stable navigation anchors.</li>
              <li>Agent presence as a floating, omnipresent control surface.</li>
              <li>Density optimized for expert workflows.</li>
            </ul>
            <h2>Sample Contract</h2>
            <pre class="md-code"><code>type TargetRef = {
  targetType: "file" | "diagram" | "slide";
  path: string;
  location?: { line?: number; slide?: number };
}</code></pre>
            <p>Next phase: wire this view to real artifacts and keep typography/spacing controls user-configurable.</p>
          </article>
        </section>

        <!-- Discussion -->
        <section class="view" id="view-discussion">
          <div class="chat-focus">
            <div class="chat-log">
              <div class="msg agent">I reviewed the architecture docs and identified two options for runtime coordination. Do you want a strict write queue or optimistic locking with conflict detection?</div>
              <div class="msg user">Let‚Äôs start optimistic for speed, but keep hooks for queueing if conflicts appear.</div>
              <div class="msg agent">Got it. I‚Äôll scaffold the optimistic path and add observability markers to measure collision rates.</div>
              <div class="msg user">Perfect. Also keep the UI density high and avoid saturated color in chat bubbles.</div>
              <div class="msg agent">Done. I switched to neutral message styling and reserved strong accent only for actionable states.</div>
            </div>
            <div class="chat-compose">
              <button class="mic-btn">üéô</button>
              <input class="compose-input" placeholder="Ask the team of agents..." />
            </div>
          </div>
        </section>

        <!-- Presentation -->
        <section class="view" id="view-presentation">
          <div class="present">
            <div class="slides">
              <div class="thumb active">Slide 1</div>
              <div class="thumb">Slide 2</div>
              <div class="thumb">Slide 3</div>
              <div class="thumb">Slide 4</div>
            </div>
            <div class="stage-wrap">
              <div class="slide-stage">
                <div class="slide-title">OpenSpace Integration Strategy</div>
                <div class="slide-body">
                  - Keep a single visual language across modalities<br/>
                  - Preserve linear conversation anchor via floating agent<br/>
                  - Support equal-priority panes + tab fallback<br/>
                  - Optimize for expert density on desktop
                </div>
                <div class="slide-foot">Speaker note: emphasize ‚Äúagent always present‚Äù as the key product differentiator.</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Dashboard -->
        <section class="view" id="view-dashboard">
          <div class="dashboard">
            <div class="card">
              <h4>Sprint Progress</h4>
              <div class="metric">73%</div>
              <div class="sub">11 / 15 milestones completed</div>
              <div class="bar"><span style="width:73%"></span></div>
            </div>
            <div class="card">
              <h4>Agent Throughput</h4>
              <div class="metric">42</div>
              <div class="sub">completed actions / day</div>
              <div class="bar"><span style="width:68%"></span></div>
            </div>
            <div class="card">
              <h4>Build Health</h4>
              <div class="metric">98.2%</div>
              <div class="sub">success rate this week</div>
              <div class="bar"><span style="width:98%"></span></div>
            </div>
            <div class="card" style="grid-column: span 2; min-height: 160px;">
              <h4>Activity Feed</h4>
              <div class="feed">Builder updated `auth.service.ts` <span class="time">2m</span></div>
              <div class="feed">Oracle posted architecture delta notes <span class="time">8m</span></div>
              <div class="feed">Janitor completed regression check <span class="time">13m</span></div>
              <div class="feed">Designer published presentation v3 <span class="time">21m</span></div>
            </div>
            <div class="card" style="min-height: 160px;">
              <h4>Blockers</h4>
              <div class="feed">‚Ä¢ OAuth callback mismatch</div>
              <div class="feed">‚Ä¢ Slide export typography fallback</div>
              <div class="feed">‚Ä¢ Whiteboard selection edge case</div>
            </div>
          </div>
        </section>
      </main>

      <aside class="panel-right">
        <div class="panel-header">
          <span>Changes</span>
          <span style="text-transform:none; font-weight:400; color: var(--text-2);">3 files</span>
        </div>
        <div class="panel-body">
          <div class="diff-card">
            <span>auth.service.ts</span>
            <span class="stats"><span class="add">+45</span> <span class="del">-12</span></span>
          </div>
          <div class="diff-card">
            <span>REQ-CORE-PRD.md</span>
            <span class="stats"><span class="add">+12</span> <span class="del">-0</span></span>
          </div>
          <div class="diff-card">
            <span>architecture-v2.graph.mmd</span>
            <span class="stats"><span class="add">+8</span> <span class="del">-2</span></span>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <button class="agent-float" title="Open agent">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="3" width="18" height="18" rx="2"/>
      <line x1="3" y1="9" x2="21" y2="9"/>
      <line x1="9" y1="21" x2="9" y2="9"/>
    </svg>
  </button>

  <script>
    const buttons = [...document.querySelectorAll('.mode-btn')];
    const views = [...document.querySelectorAll('.view')];

    function activate(viewName) {
      buttons.forEach(b => b.classList.toggle('active', b.dataset.view === viewName));
      views.forEach(v => v.classList.toggle('active', v.id === `view-${viewName}`));
    }

    buttons.forEach(btn => {
      btn.addEventListener('click', () => activate(btn.dataset.view));
    });
  </script>
</body>
</html>