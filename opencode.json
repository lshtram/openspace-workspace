{
  "$schema": "https://opencode.ai/config.json",
  "command": {
    "document": {
      "description": "Generate end-to-end session documentation. Usage: /document [topic]",
      "agent": "build",
      "template": "# Execute /document Command\n\nLoad the `document-session` skill and execute the 6-phase documentation pipeline defined in `.agent/workflows/document.md`.\n\n**Topic Override**: $ARGUMENTS (if provided; otherwise infer from conversation)\n\n## Workflow Requirements\n\n### Phase 1: Load Skills\nLoad `document-session` skill to enable the complete workflow.\n\n### Phase 2: Capture (Conversation)\n1. Read current session history using `session_read` tool\n2. Auto-detect session number (scan `docs/requirements/conversations/`, find highest NNN, increment)\n3. Generate date string (YYYY-MM-DD)\n4. Determine topic: use $ARGUMENTS if provided; otherwise infer from conversation\n5. Create verbatim transcript in `docs/requirements/conversations/session-NNN-YYYY-MM-DD-topic.md`\n\n### Phase 3: Summarize\n6. Extract key points from conversation\n7. Categorize into: Decisions, Features, Insights, Questions, Actions, Next Topics\n8. Create summary in `docs/requirements/summaries/session-NNN-summary.md`\n\n### Phase 4: Verify Summary\n9. Cross-reference summary against verbatim transcript\n10. Verify completeness and accuracy\n11. Create verification report in `docs/requirements/summaries/session-NNN-verification.md`\n\n### Phase 5: Generate Requirements\n12. Identify prefix (e.g., REQ-VOICE, REQ-CANVAS)\n13. Convert summary key points to formal numbered requirements\n14. Create requirements in `docs/requirements/official/REQ-[PREFIX]-001-through-NNN.md`\n15. Include traceability links back to session\n16. Update existing session files in place (idempotent)\n\n### Phase 6: Verify Requirements\n17. Cross-check requirements against summaries\n18. Validate traceability and completeness\n19. Create verification report in `docs/requirements/official/REQ-[PREFIX]-verification.md`\n\n### Phase 7: Finalize\n20. Update `docs/requirements/INDEX.md` with new session/requirements entries\n21. Ensure `docs/requirements/DOCUMENTATION_PROCESS.md` exists\n22. Return success confirmation with all file paths\n\n## Output Files (ONLY)\n\nCreate only these files; do NOT create architecture diagrams, API references, or other output types:\n- `docs/requirements/conversations/session-NNN-YYYY-MM-DD-topic.md` (verbatim transcript)\n- `docs/requirements/summaries/session-NNN-summary.md` (key points)\n- `docs/requirements/summaries/session-NNN-verification.md` (summary verification)\n- `docs/requirements/official/REQ-[PREFIX]-NNN.md` (formal requirements)\n- `docs/requirements/official/REQ-[PREFIX]-verification.md` (requirements verification)\n- `docs/requirements/INDEX.md` (master cross-reference)\n- `docs/requirements/DOCUMENTATION_PROCESS.md` (explains the system)\n\n## Idempotency\n\nIf documenting the same session multiple times, update existing files in place rather than creating duplicates."
    }
  }
}
